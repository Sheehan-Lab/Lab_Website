---
import Layout from '../layouts/Layout.astro';

// Function to fetch the latest research paper from ORCID
const fetchLatestResearchPaper = async () => {
  try {
    const response = await fetch(`https://pub.orcid.org/v3.0/0000-0003-2837-2255/works`, {
      headers: {
        'Accept': 'application/json'
      }
    });
    const data = await response.json();
    const latestWork = data.group[0]['work-summary'][0];
    return {
      title: latestWork.title.title.value,
      summary: latestWork['journal-title']?.value || 'No summary available',
      url: latestWork['external-ids']['external-id'].find(id => id['external-id-type'] === 'doi')?.['external-id-url']?.value || '#'
    };
  } catch (error) {
    console.error('Error fetching latest research paper:', error);
    return null;
  }
};

const latestResearchPaper = await fetchLatestResearchPaper();
---

<Layout title="Sheehan Lab | Sickle Cell Disease Research at Emory University">
	<main>
		<section class="hero">
			<div class="hero-content">
				<h1>Sheehan Lab</h1>
				<p class="subtitle">Advancing Sickle Cell Disease Research and Treatment</p>
				<div class="hero-buttons">
					<a href="/research" class="button primary">Explore Our Research</a>
					<a href="/publications" class="button secondary">View Publications</a>
				</div>
			</div>
		</section>

		<section class="mission">
			<div class="container">
				<h2>Our Mission</h2>
				<p>The Sheehan Lab is dedicated to developing and improving therapies for individuals living with sickle cell disease. Our multifaceted approach combines genomics, clinical research, and innovative biomarker development to better understand and treat this complex disease.</p>
			</div>
		</section>

		<section class="research-highlights">
			<div class="container">
				<h2>Research Focus</h2>
				<div class="highlight-grid">
					<div class="highlight-card">
						<div class="card-icon">ðŸ§¬</div>
						<h3>Genomics & Therapy</h3>
						<p>Identifying genetic factors and new drug targets to increase fetal hemoglobin levels.</p>
					</div>
					<div class="highlight-card">
						<div class="card-icon">ðŸ”¬</div>
						<h3>Pain Management</h3>
						<p>Investigating genetic factors in chronic pain development and biomarker research.</p>
					</div>
					<div class="highlight-card">
						<div class="card-icon">ðŸ§ª</div>
						<h3>Biomarker Development</h3>
						<p>Creating new methods to evaluate red cell function and therapy effectiveness.</p>
					</div>
					<div class="highlight-card">
						<div class="card-icon">ðŸ§¬</div>
						<h3>Gene-Based Therapies</h3>
						<p>Evaluating and improving gene therapy approaches for better patient outcomes.</p>
					</div>
				</div>
			</div>
		</section>

		<section class="latest-updates">
			<div class="container">
				<h2>Latest Updates</h2>
				<div class="updates-grid">
					{latestResearchPaper ? (
						<div class="update-card">
							<h3>{latestResearchPaper.title}</h3>
							<p>{latestResearchPaper.summary}</p>
							<a href={latestResearchPaper.url} class="button primary">Read More</a>
						</div>
					) : (
						<p>No recent research papers available.</p>
					)}
				</div>
			</div>
		</section>
	</main>

	<style>
		.hero {
			background: linear-gradient(rgba(1, 33, 105, 0.85), rgba(1, 33, 105, 0.9)),
						url('/images/lab-background.jpg') center/cover;
			height: 70vh;
			display: flex;
			align-items: center;
			justify-content: center;
			text-align: center;
			margin-top: 80px;
		}

		.hero-content {
			max-width: 800px;
			padding: 2rem;
			color: #ffffff;
			animation: fadeIn 1s ease-out;
		}

		.hero h1 {
			font-size: 4rem;
			margin-bottom: 1rem;
			color: white;
		}

		.subtitle {
			font-size: 1.5rem;
			opacity: 0.9;
			margin-bottom: 2rem;
			color: #ffffff;
		}

		.hero-buttons {
			margin-top: 1.5rem;
		}

		.button {
			margin: 0 0.5rem;
			padding: 0.8rem 1.5rem;
			border-radius: 4px;
			text-decoration: none;
			transition: all 0.3s ease;
			position: relative;
			overflow: hidden;
			display: inline-block;
			font-weight: 500;
		}

		.button.primary {
			background-color: var(--emory-accent);
			color: white;
		}

		.button.secondary {
			background-color: transparent;
			border: 2px solid white;
			color: white;
		}

		.button:hover {
			transform: translateY(-2px);
		}

		.button.primary:hover {
			background-color: var(--emory-accent);
			color: white;
		}

		.button.secondary:hover {
			background-color: rgba(255, 255, 255, 0.1);
		}

		.mission {
			padding: 4rem 2rem;
			background: #f8fafc;
			text-align: center;
		}

		.container {
			max-width: 800px;
			margin: 0 auto;
		}

		.research-highlights {
			padding: 6rem 0;
			background: #f8fafc;
		}

		.highlight-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
			gap: 2rem;
			margin-top: 3rem;
		}

		.highlight-card {
			background: white;
			padding: 2rem;
			border-radius: 8px;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			transition: transform 0.3s ease, box-shadow 0.3s ease;
			animation: fadeIn 0.5s ease-out;
			animation-fill-mode: both;
		}

		.highlight-card:nth-child(1) { animation-delay: 0.1s; }
		.highlight-card:nth-child(2) { animation-delay: 0.2s; }
		.highlight-card:nth-child(3) { animation-delay: 0.3s; }
		.highlight-card:nth-child(4) { animation-delay: 0.4s; }

		.highlight-card:hover {
			transform: translateY(-5px);
			box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
		}

		.card-icon {
			font-size: 2rem;
			margin-bottom: 1rem;
		}

		.latest-updates {
			padding: 4rem 2rem;
			background: #ffffff;
		}

		.updates-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
			gap: 2rem;
		}

		.update-card {
			background: #f8fafc;
			padding: 2rem;
			border-radius: 8px;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			text-align: center;
		}

		/* Add specific styling for buttons in update cards */
		.update-card .button.primary {
			background-color: black;
			border: 2px solid black;
			color: white;
		}

		.update-card .button.primary:hover {
			background-color: white;
			color: black;
		}

		@media (max-width: 768px) {
			.hero h1 {
				font-size: 2.5rem;
			}

			.subtitle {
				font-size: 1.2rem;
			}

			.hero-buttons {
				flex-direction: column;
			}

			.button {
				width: 100%;
			}
		}

		/* Add a subtle parallax effect to the hero */
		.hero {
			background-attachment: fixed;
		}

		/* Add hover effect to cards */
		.highlight-card {
			transition: transform 0.3s ease, box-shadow 0.3s ease;
		}

		.highlight-card:hover {
			transform: translateY(-5px);
			box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
		}

		/* Add a subtle gradient to the news cards */
		.news-card.featured {
			background: linear-gradient(135deg, var(--emory-primary), var(--emory-accent));
		}
	</style>
</Layout>
