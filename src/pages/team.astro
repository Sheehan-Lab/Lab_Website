---
import Layout from '../layouts/Layout.astro';

const teamMembers = [
  { 
    name: "Dr. Vivien Sheehan", 
    role: "Principal Investigator", 
    bio: "Placeholder bio for Dr. Vivien Sheehan.",
    email: "vivien.sheehan@emory.edu"
  },
  { 
    name: "Britney Hernandez", 
    role: "Lab Manager", 
    bio: "Placeholder bio for Britney Hernandez.",
    email: "britney.hernandez@emory.edu"
  },
  { name: "Dr. Justin Yoo MD", role: "Clinical Instructor", bio: "Placeholder bio for Dr. Justin Yoo.", email: "justin.yoo@emory.edu" },
  { name: "Dr. Kennedy Goldsborough PhD", role: "Postdoctoral Researcher", bio: "Placeholder bio for Dr. Kennedy Goldsborough.", email: "kennedy.goldsborough@emory.edu" },
  { name: "Dr. Ashwin Patel MBBS, PhD", role: "Associate Professor", bio: "Placeholder bio for Dr. Ashwin Patel.", email: "ashwin.patel@emory.edu" },
  { 
    name: "Dr. Ugochukwu Agbakwuru MD", 
    role: "Pediatric Hematology/Oncology Fellow", 
    bio: "Placeholder bio for Ugochukwu Agbakwuru.",
    email: "ugo.agbakwuru@emory.edu"
  },
 
  { name: "Erica Evans", role: "Consultant", bio: "Placeholder bio for Erica Evans.", email: "erica.evans@emory.edu" },
  { name: "Kirandeep Raina", role: "Research Manager", bio: "Placeholder bio for Kirandeep Raina.", email: "kirandeep.raina@emory.edu" },
  { name: "Mary Aliche", role: "Research Specialist", bio: "Placeholder bio for Mary Aliche.", email: "mary.aliche@emory.edu" },
  { name: "Kathleen Romero", role: "Research Specialist", bio: "Placeholder bio for Kathleen Romero.", email: "kathleen.romero@emory.edu" },
  { name: "Jedidah Titus", role: "Research Specialist", bio: "Placeholder bio for Jedidah Titus.", email: "jedidah.titus@emory.edu" },
  { name: "Alex Pendergast", role: "Graduate Student", bio: "Placeholder bio for Alex Pendergast.", email: "alex.pendergast@emory.edu" },
  { name: "Anupama Priyadarshini", role: "Research Scientist", bio: "Placeholder bio for Anupama Priyadarshini.", email: "anupama.priyadarshini@emory.edu" },
  { name: "Srija Ponna", role: "Research Specialist", bio: "Placeholder bio for Srija Ponna.", email: "srija.ponna@emory.edu" },
  { name: "Jonathan Wade", role: "Research Specialist", bio: "Placeholder bio for Jonathan Wade.", email: "jonathan.wade@emory.edu" },
  { name: "Zak Kostamo", role: "Research Specialist", bio: "Placeholder bio for Zak Kostamo.", email: "zak.kostamo@emory.edu" }
];

let activeIndex = null;

function toggleDropdown(index) {
  const details = document.querySelectorAll('.member-details');
  details.forEach((detail, i) => {
    if (i === index) {
      detail.classList.toggle('active');
    } else {
      detail.classList.remove('active');
    }
  });
}
---

<Layout title="Our Team | Sheehan Lab">
  <main>
    <section class="page-header">
      <div class="container">
        <h1>Our Team</h1>
        <p>Meet our passionate team of researchers</p>
      </div>
    </section>

    <section class="team-grid">
      <div class="container">
        {teamMembers.map((member, index) => (
          <div class="team-member" data-index={index}>
            <div class="member-info">
              <h2>{member.name}</h2>
              <h3>{member.role}</h3>
            </div>
            <div class="member-details">
              <p>{member.bio}</p>
              <p>Email: <a href={`mailto:${member.email}`}>{member.email}</a></p>
            </div>
          </div>
        ))}
      </div>
    </section>

    <section class="join-team">
      <div class="container">
        <h2>Join Our Team</h2>
        <p>We're always looking for passionate researchers to join our mission in advancing sickle cell disease treatment.</p>
        <a href="/contact" class="button primary">Contact Us</a>
      </div>
    </section>
  </main>

  <style>
    .page-header {
      background: url('public/images/Sheehan Team Photo 4.JPG') center/cover;
      color: white;
      padding: 12rem 2rem 8rem;  /* Increased padding top and bottom */
      margin-top: 60px;
      text-align: center;
      position: relative;
      background-attachment: fixed;
      min-height: 60vh;  /* Added minimum height */
    }

    .page-header h1 {
      color: white;
      font-size: 2.8rem;
      margin-bottom: 1rem;
      position: relative;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }

    .page-header p {
      color: white;
      font-size: 1.2rem;
      max-width: 600px;
      margin: 0 auto;
      position: relative;
      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
    }

    @media (max-width: 768px) {
      .page-header {
        padding: 8rem 2rem 4rem;  /* Slightly reduced padding for mobile */
        min-height: 40vh;  /* Adjusted for mobile */
        background-attachment: scroll;  /* Better mobile performance */
      }
    }

    .team-grid {
      padding: 4rem 0;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .team-member {
      padding: 2rem;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    /* Alternate background colors */
    .team-member:nth-child(even) {
      background: #f8fafc;
    }

    .team-member:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 12px rgba(0,0,0,0.1);
    }

    .member-details {
      max-height: 0;
      opacity: 0;
      overflow: hidden;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      padding: 0 1rem;
    }

    .member-details.active {
      max-height: 300px; /* Increased for smoother animation */
      opacity: 1;
      padding-top: 1rem;
      margin-top: 1rem;
      border-top: 1px solid #edf2f7;
    }

    .member-details a {
      color: var(--emory-primary);
      text-decoration: none;
      transition: color 0.2s ease;
    }

    .member-details a:hover {
      color: var(--emory-accent);
    }

    .member-info h2 {
      color: var(--emory-primary);
      margin-bottom: 0.5rem;
    }

    .member-info h3 {
      color: var(--text-secondary);
      font-weight: 500;
      margin-bottom: 1rem;
    }

    .join-team {
      background: #f8fafc;
      padding: 4rem 0;
      text-align: center;
    }

    .button.primary {
      display: inline-block;
      padding: 1rem 2rem;
      background: var(--emory-primary);
      color: white;
      text-decoration: none;
      border-radius: 4px;
      margin-top: 1rem;
      transition: all 0.3s ease;
    }

    .button.primary:hover {
      background: var(--emory-accent);
      transform: translateY(-2px);
    }
  </style>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const members = document.querySelectorAll('.team-member');
      members.forEach((member, index) => {
        member.addEventListener('click', () => {
          const details = member.querySelector('.member-details');
          const wasActive = details.classList.contains('active');
          
          // Close all other open details
          document.querySelectorAll('.member-details.active').forEach(detail => {
            if (detail !== details) {
              detail.classList.remove('active');
            }
          });

          // Toggle the clicked details
          details.classList.toggle('active');
          
          // Scroll into view if opening and not fully visible
          if (!wasActive) {
            setTimeout(() => {
              const rect = member.getBoundingClientRect();
              const isFullyVisible = 
                rect.top >= 0 &&
                rect.bottom <= window.innerHeight;
              
              if (!isFullyVisible) {
                member.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
              }
            }, 100);
          }
        });
      });
    });
  </script>
</Layout>